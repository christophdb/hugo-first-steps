<head>
    <meta charset="utf-8" />
    {{ with .Site.Language.Params.htmlCode | default .Site.LanguageCode }}<meta http-equiv="content-language" content="{{ . }}" />{{ end }}
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>{{ .Title | emojify | safeHTML }}</title>
    {{ if .Params.seo.title -}}
        <meta name="title" content="{{ .Params.seo.title | emojify | safeHTML }}" />
    {{- else -}}
        <meta name="title" content="{{ .Title | emojify | safeHTML }}" />
    {{- end -}}

    {{/* Metadata */}}
    {{ with (.Params.seo.description | default .Params.Summary | default .Params.Description) | default .Site.Params.description -}}
        <meta name="description" content="{{ . | safeHTML }}" />
    {{- end }}
    {{ with .Site.Params.robots }}
        <meta name="robots" content="{{ . }}" />
    {{ end }}
    {{ with .Params.robots }}
        <meta name="robots" content="{{ . }}" />
    {{ end }}


    <!-- Do not index taxonomy and term pages -->
    {{- if or (eq .Kind "taxonomy") (eq .Kind "term") (eq .Params.seo.index "noindex") -}}
        <meta name="robots" content="noindex" />
    {{- end }}


    <link rel="canonical" href="{{ .Permalink }}" />

    {{- if .IsTranslated -}}
        {{ range .AllTranslations }}
            <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
        {{- end -}}
        {{ range first 1 .AllTranslations }}
            <link rel="alternate" hreflang="x-default" href="{{ .Permalink }}" />
        {{- end -}}
    {{ end }}


    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="SeaTable" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- hier kann man noch ganz viel machen: apple-touch-icon etc... -->
    <!-- site verification google, bing, ... -->
    {{ if .Site.Params.Seo.googleSearchConsoleVerificationTag }}
        <meta name="google-site-verification" content="{{ .Site.Params.Seo.googleSearchConsoleVerificationTag }}" />
    {{ end }}

    {{/* Verification for prefix-based properties (one per language) */}}
    <meta name="google-site-verification" content="E2ZqrTXGnRUVI2ojFqaO1UCciOZW3fXsw8Wzroy6Glc" />

    <!-- social ... -->
    {{ if hugo.IsProduction }}
        {{ template "_internal/opengraph.html" . }}
        {{ template "_internal/twitter_cards.html" . }}

        {{ if or (eq .Type "help") (eq .Type "help-start") }}
            <meta property="og:image" content="{{ absURL `images/logos/seatable-og-help.png` }}" />
        {{ else if and (or (eq .Type "page") (eq .Type "pages")) (ne .Section "templates") }}
            {{/* Image for pages (excluding templates since they have a featured image) */}}
            <meta property="og:image" content="{{ absURL `images/logos/seatable-og-pages.png` }}" />
        {{ end }}
    {{ else }}
        {{ "<!-- OpenGraph and Twitter cards are not generated in development mode -->" | safeHTML }}
    {{ end }}

    {{ partial "head/css.html" . }}
    {{ partial "head/js.html" . }}

    {{ if hugo.IsProduction }}
        <!-- Umami -->
        <script defer src="https://umami.seatable.com/script.js" data-website-id="7f437983-c20e-4d84-8219-9bd8a1c6752f" data-domains="seatable.com"></script>
    {{ else }}
        <script src="https://cloud.umami.is/script.js" data-website-id="e4869093-ea4d-4a54-8651-abab9e022cf9"></script>
    {{ end }}


    <!-- OpenReplay -->
    <script>
        var initOpts = {
            projectKey: 'MMtUDDydjtXLVHJ3tKtg',
            ingestPoint: 'https://openreplay.seatable.com/ingest',
            defaultInputMode: 2,
            obscureTextNumbers: false,
            obscureTextEmails: true,
            __DISABLE_SECURE_MODE: true,
        };
        var startOpts = { userID: '' };
        (function (A, s, a, y, e, r) {
            r = window.OpenReplay = [e, r, y, [s - 1, e]];
            s = document.createElement('script');
            s.src = A;
            s.async = !a;
            document.getElementsByTagName('head')[0].appendChild(s);
            r.start = function (v) {
                r.push([0]);
            };
            r.stop = function (v) {
                r.push([1]);
            };
            r.setUserID = function (id) {
                r.push([2, id]);
            };
            r.setUserAnonymousID = function (id) {
                r.push([3, id]);
            };
            r.setMetadata = function (k, v) {
                r.push([4, k, v]);
            };
            r.event = function (k, p, i) {
                r.push([5, k, p, i]);
            };
            r.issue = function (k, p) {
                r.push([6, k, p]);
            };
            r.isActive = function () {
                return false;
            };
            r.getSessionToken = function () {};
        })('//static.openreplay.com/17.0.0/openreplay.js', 1, 0, initOpts, startOpts);
    </script>
</head>
